<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Crafty - JavaScript Game Engine</title>
<link type="text/css" rel="stylesheet" href="../global.css"/>
<link href='http://fonts.googleapis.com/css?family=Arvo:regular,bold' rel='stylesheet' type='text/css'>
<link rel="shortcut icon" href="../favicon.ico"> 
</head>
<body>
<div id="header">
	<div id="inner">
	<a href="http://craftyjs.com"><img id="logo" src="../images/logo.png" alt="Crafty - JavaScript Game Engine" /></a>
	<ul>
		<li><a href="http://craftyjs.com/tutorial/">Getting Started</a></li>
		<li><a href="http://craftyjs.com/api/">Documentation</a></li>
		<li><a href="https://groups.google.com/forum/#!forum/craftyjs">Forum</a></li>
		<li><a href="http://craftycomponents.com/">Modules</a></li>
		<li class="emph"><a href="http://craftycomponents.com/components/single/8/crafty">Download</a></li>
	</ul>
	</div>
</div>
<div id="main">
<div id="main-left"></div>
<div id="main-right"></div>
<div id="content"><div id='doc-nav'><ul id='doc-level-one'><li><a href='events.html'>List of Events</a></li><li>Core<ul><li><a href='Crafty.html'>Crafty</a></li><li><a href='Crafty-Core.html'>Crafty Core</a></li><li><a href='Crafty-extend.html'>Crafty.extend</a></li><li><a href='Crafty-init.html'>Crafty.init</a></li><li><a href='Crafty-stop.html'>Crafty.stop</a></li><li><a href='Crafty-pause.html'>Crafty.pause</a></li><li><a href='Crafty-isPaused.html'>Crafty.isPaused</a></li><li><a href='Crafty-e.html'>Crafty.e</a></li><li><a href='Crafty-c.html'>Crafty.c</a></li><li><a href='Crafty-trigger.html'>Crafty.trigger</a></li><li><a href='Crafty-bind.html'>Crafty.bind</a></li><li><a href='Crafty-unbind.html'>Crafty.unbind</a></li><li><a href='Crafty-frame.html'>Crafty.frame</a></li><li><a href='Crafty-settings.html'>Crafty.settings</a></li><li><a href='Crafty-clone.html'>Crafty.clone</a></li><li><a href='FPS.html'>FPS</a></li><li><a href='Crafty-support.html'>Crafty.support</a></li><li><a href='Crafty-stage.html'>Crafty.stage</a></li></ul></li><li>Internal<ul><li><a href='Crafty-timer.html'>Crafty.timer</a></li></ul></li><li>Events<ul><li><a href='Crafty-trigger.html'>Crafty.trigger</a></li><li><a href='Crafty-bind.html'>Crafty.bind</a></li><li><a href='Crafty-unbind.html'>Crafty.unbind</a></li><li><a href='Crafty-addEvent.html'>Crafty.addEvent</a></li><li><a href='Crafty-removeEvent.html'>Crafty.removeEvent</a></li></ul></li><li>2D<ul><li><a href='Crafty-HashMap.html'>Crafty.HashMap</a></li><li><a href='Crafty-map.html'>Crafty.map</a></li><li><a href='2D.html'>2D</a></li><li><a href='Gravity.html'>Gravity</a></li><li><a href='Crafty-polygon.html'>Crafty.polygon</a></li><li><a href='Crafty-circle.html'>Crafty.circle</a></li><li><a href='Collision.html'>Collision</a></li><li><a href='Crafty-isometric.html'>Crafty.isometric</a></li><li><a href='Crafty-math.html'>Crafty.math</a></li><li><a href='Crafty-math-Vector2D.html'>Crafty.math.Vector2D</a></li><li><a href='Crafty-math-Matrix2D.html'>Crafty.math.Matrix2D</a></li></ul></li><li>Graphics<ul><li><a href='DOM.html'>DOM</a></li><li><a href='Crafty-DOM.html'>Crafty.DOM</a></li><li><a href='HTML.html'>HTML</a></li><li><a href='Crafty-sprite.html'>Crafty.sprite</a></li><li><a href='Crafty-background.html'>Crafty.background</a></li><li><a href='Sprite.html'>Sprite</a></li><li><a href='Canvas.html'>Canvas</a></li><li><a href='Crafty-canvas.html'>Crafty.canvas</a></li><li><a href='Color.html'>Color</a></li><li><a href='Tint.html'>Tint</a></li><li><a href='Image.html'>Image</a></li><li><a href='Crafty-toRGB.html'>Crafty.toRGB</a></li><li><a href='Crafty-DrawManager.html'>Crafty.DrawManager</a></li><li><a href='Particles.html'>Particles</a></li><li><a href='Text.html'>Text</a></li></ul></li><li>Utilities<ul><li><a href='Storage.html'>Storage</a></li><li><a href='Crafty-Time.html'>Crafty Time</a></li></ul></li><li>Misc<ul><li><a href='Crafty-support.html'>Crafty.support</a></li><li><a href='Crafty-addEvent.html'>Crafty.addEvent</a></li><li><a href='Crafty-removeEvent.html'>Crafty.removeEvent</a></li><li><a href='Crafty-device.html'>Crafty.device</a></li></ul></li><li>Stage<ul><li><a href='Crafty-background.html'>Crafty.background</a></li><li><a href='Crafty-viewport.html'>Crafty.viewport</a></li><li><a href='Crafty-scene.html'>Crafty.scene</a></li></ul></li><li>Input<ul><li><a href='Crafty-keys.html'>Crafty.keys</a></li><li><a href='Crafty-mouseButtons.html'>Crafty.mouseButtons</a></li><li><a href='Crafty-keydown.html'>Crafty.keydown</a></li><li><a href='Crafty-mouseDispatch.html'>Crafty.mouseDispatch</a></li><li><a href='Crafty-touchDispatch.html'>Crafty.touchDispatch</a></li><li><a href='KeyboardEvent.html'>KeyboardEvent</a></li><li><a href='Crafty-eventObject.html'>Crafty.eventObject</a></li><li><a href='Mouse.html'>Mouse</a></li><li><a href='Draggable.html'>Draggable</a></li><li><a href='Keyboard.html'>Keyboard</a></li><li><a href='Multiway.html'>Multiway</a></li><li><a href='Fourway.html'>Fourway</a></li><li><a href='Twoway.html'>Twoway</a></li></ul></li><li>Animation<ul><li><a href='SpriteAnimation.html'>SpriteAnimation</a></li><li><a href='Tween.html'>Tween</a></li></ul></li><li>Scenes<ul><li><a href='Crafty-scene.html'>Crafty.scene</a></li></ul></li><li>Audio<ul><li><a href='Crafty-audio.html'>Crafty.audio</a></li></ul></li><li>Assets<ul><li><a href='Crafty-assets.html'>Crafty.assets</a></li><li><a href='Crafty-asset.html'>Crafty.asset</a></li><li><a href='Crafty-image_whitelist.html'>Crafty.image_whitelist</a></li><li><a href='Crafty-loader.html'>Crafty.loader</a></li><li><a href='Crafty-modules.html'>Crafty.modules</a></li></ul></li></ul></div><div id='doc-content'><h1>SpriteAnimation</h1>

<h3>Events</h3>

<dl>
<dt>AnimationEnd [Data: { reel }]</dt>
<dd>When the animation finishes</dd>

<dt>Change</dt>
<dd>On each frame</dd>
</dl>

<p>Used to animate sprites by changing the sprites in the sprite map.</p>
<div class='doc-contents'><ul><li><a href='#-_reels'>._reels</a></li><li><a href='#-_currentReelId'>._currentReelId</a></li><li><a href='#-animate'>.animate</a></li><li><a href='#-updateSprite'>.updateSprite</a></li><li><a href='#-stop'>.stop</a></li><li><a href='#-reset'>.reset</a></li><li><a href='#-isPlaying'>.isPlaying</a></li></ul></div><div class='doc-block' id='-_reels'><a href='#doc-nav' class='doc-top'>Back to top</a><h2>._reels</h2>

<p>A map consists of arrays that contains the coordinates of each frame within the sprite, e.g.,
<code>{"walk_left":[[96,48],[112,48],[128,48]]}</code></p>
</div><div class='doc-block' id='-_currentReelId'><a href='#doc-nav' class='doc-top'>Back to top</a><h2>._currentReelId</h2>

<p>The current playing reel (one element of <code>this._reels</code>). It is <code>null</code> if no reel is playing.</p>
</div><div class='doc-block' id='-animate'><a href='#doc-nav' class='doc-top'>Back to top</a><h2>.animate</h2>

<p><code>public this .animate(String reelId, Number fromX, Number y, Number toX)</code></p>

<dl>
<dt>reelId</dt>
<dd>ID of the animation reel being created</dd>

<dt>fromX</dt>
<dd>Starting <code>x</code> position (in the unit of sprite horizontal size) on the sprite map</dd>

<dt>y</dt>
<dd><code>y</code> position on the sprite map (in the unit of sprite vertical size). Remains constant through the animation.</dd>

<dt>toX</dt>
<dd>End <code>x</code> position on the sprite map (in the unit of sprite horizontal size)</dd>
</dl>

<p><code>public this .animate(String reelId, Array frames)</code></p>

<dl>
<dt>reelId</dt>
<dd>ID of the animation reel being created</dd>

<dt>frames</dt>
<dd>Array of arrays containing the <code>x</code> and <code>y</code> values: [[x1,y1],[x2,y2],...]</dd>
</dl>

<p><code>public this .animate(String reelId, Number duration[, Number repeatCount])</code></p>

<dl>
<dt>reelId</dt>
<dd>ID of the animation reel to play</dd>

<dt>duration</dt>
<dd>Play the animation within a duration (in frames)</dd>

<dt>repeatCount</dt>
<dd>number of times to repeat the animation. Use -1 for infinitely</dd>
</dl>

<p>Method to setup animation reels or play pre-made reels. Animation works by changing the sprites over
a duration. Only works for sprites built with the Crafty.sprite methods. See the Tween component for animation of 2D properties.</p>

<p>To setup an animation reel, pass the name of the reel (used to identify the reel and play it later), and either an
array of absolute sprite positions or the start x on the sprite map, the y on the sprite map and then the end x on the sprite map.</p>

<p>To play a reel, pass the name of the reel and the duration it should play for (in frames). If you need
to repeat the animation, simply pass in the amount of times the animation should repeat. To repeat
forever, pass in <code>-1</code>.</p>

<h3>Example</h3>

<pre><code>Crafty.sprite(16, "images/sprite.png", {
    PlayerSprite: [0,0]
});

Crafty.e("2D, DOM, SpriteAnimation, PlayerSprite")
    .animate('PlayerRunning', 0, 0, 3) //setup animation
    .animate('PlayerRunning', 15, -1) // start animation

Crafty.e("2D, DOM, SpriteAnimation, PlayerSprite")
    .animate('PlayerRunning', 0, 3, 0) //setup animation
    .animate('PlayerRunning', 15, -1) // start animation
</code></pre>

<h3>See Also</h3>

<ul>
<li><a href="crafty-sprite.html">crafty.sprite</a></li>
</ul>
</div><div class='doc-block' id='-updateSprite'><a href='#doc-nav' class='doc-top'>Back to top</a><h2>.updateSprite</h2>

<p><code>private void .updateSprite()</code></p>

<p>This is called at every <code>EnterFrame</code> event when <code>.animate()</code> enables animation. It update the SpriteAnimation component when the slide in the sprite should be updated.</p>

<h3>Example</h3>

<pre><code>this.bind("EnterFrame", this.updateSprite);
</code></pre>

<h3>See Also</h3>

<ul>
<li><a href="crafty-sprite.html">crafty.sprite</a></li>
</ul>
</div><div class='doc-block' id='-stop'><a href='#doc-nav' class='doc-top'>Back to top</a><h2>.stop</h2>

<p><code>public this .stop(void)</code></p>

<p>Stop any animation currently playing.</p>
</div><div class='doc-block' id='-reset'><a href='#doc-nav' class='doc-top'>Back to top</a><h2>.reset</h2>

<p><code>public this .reset(void)</code></p>

<p>Method will reset the entities sprite to its original.</p>
</div><div class='doc-block' id='-isPlaying'><a href='#doc-nav' class='doc-top'>Back to top</a><h2>.isPlaying</h2>

<p><code>public Boolean .isPlaying([String reelId])</code></p>

<dl>
<dt>reelId</dt>
<dd>Determine if the animation reel with this reelId is playing.</dd>
</dl>

<p>Determines if an animation is currently playing. If a reel is passed, it will determine
if the passed reel is playing.</p>

<h3>Example</h3>

<pre><code>myEntity.isPlaying() //is any animation playing
myEntity.isPlaying('PlayerRunning') //is the PlayerRunning animation playing
</code></pre>
</div></div></div>
</div>

<div class="clearer"></div>
<div id="footer">

  <div id="contact">
    <a href="http://twitter.com/craftyjs">
      <img src="/images/twitter.png" />
      @craftyjs
    </a>
    <a href="http://webchat.freenode.net">
      <img src="/images/comment.png" />
      #crafty@freenode.net
    </a>
    <a href="https://groups.google.com/forum/#!forum/craftyjs">
      <img src="/images/google.png" />
      google groups
    </a>
    <a href="mailto:louis@craftyjs.com">
      <img src="/images/email.png" />
      louis@craftyjs.com
    </a>
    <a href="https://github.com/craftyjs/Crafty">
      <img src="/images/github.png" />
      github
    </a>
  </div>
  <ul>
    <li>
      <a href="/api/">Documentation</a>
    </li>
    <li>
      <a href="http://craftycomponents.com/">Modules</a>
    </li>
    <li>
      <a href="https://groups.google.com/forum/#!forum/craftyjs">Forum</a>
    </li>
    <li>
      <a href="/tutorial/">Tutorial</a>
    </li>
    <li>
      <a href="http://craftycomponents.com/components/single/8/crafty">Download</a>
    </li>
  </ul>
  <p>
    &copy; Crafty 2010. Crafty is distributed under the <a href="http://en.wikipedia.org/wiki/MIT_License">MIT</a> or <a href="http://en.wikipedia.org/wiki/GNU_General_Public_License">GPL</a>
    license.
  </p>

</div>
</body>
</html>